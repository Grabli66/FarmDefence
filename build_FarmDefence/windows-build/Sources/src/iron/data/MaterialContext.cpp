// Generated by Haxe 4.0.0-preview.4+6e012c1
#include <hxcpp.h>

#ifndef INCLUDED_iron_data_Data
#include <hxinc/iron/data/Data.h>
#endif
#ifndef INCLUDED_iron_data_MaterialContext
#include <hxinc/iron/data/MaterialContext.h>
#endif
#ifndef INCLUDED_iron_data_ShaderContext
#include <hxinc/iron/data/ShaderContext.h>
#endif
#ifndef INCLUDED_iron_data_TBindTexture
#include <hxinc/iron/data/TBindTexture.h>
#endif
#ifndef INCLUDED_iron_data_TMaterialContext
#include <hxinc/iron/data/TMaterialContext.h>
#endif
#ifndef INCLUDED_kha_Canvas
#include <hxinc/kha/Canvas.h>
#endif
#ifndef INCLUDED_kha_Image
#include <hxinc/kha/Image.h>
#endif
#ifndef INCLUDED_kha_Resource
#include <hxinc/kha/Resource.h>
#endif
#ifndef INCLUDED_kha_graphics4_Graphics
#include <hxinc/kha/graphics4/Graphics.h>
#endif

HX_DEFINE_STACK_FRAME(_hx_pos_c2b72e234e45c502_78_new,"iron.data.MaterialContext","new",0x1d15a47c,"iron.data.MaterialContext.new","iron/data/MaterialData.hx",78,0x327b930f)
static const int _hx_array_data_415af68a_4[] = {
	(int)0,
};
HX_DEFINE_STACK_FRAME(_hx_pos_c2b72e234e45c502_103_new,"iron.data.MaterialContext","new",0x1d15a47c,"iron.data.MaterialContext.new","iron/data/MaterialData.hx",103,0x327b930f)
static const int _hx_array_data_415af68a_6[] = {
	(int)0,
};
HX_DEFINE_STACK_FRAME(_hx_pos_c2b72e234e45c502_116_new,"iron.data.MaterialContext","new",0x1d15a47c,"iron.data.MaterialContext.new","iron/data/MaterialData.hx",116,0x327b930f)
HX_LOCAL_STACK_FRAME(_hx_pos_c2b72e234e45c502_148_setTextureParameters,"iron.data.MaterialContext","setTextureParameters",0x742b05c7,"iron.data.MaterialContext.setTextureParameters","iron/data/MaterialData.hx",148,0x327b930f)
HX_LOCAL_STACK_FRAME(_hx_pos_c2b72e234e45c502_82_boot,"iron.data.MaterialContext","boot",0x4df34896,"iron.data.MaterialContext.boot","iron/data/MaterialData.hx",82,0x327b930f)
namespace iron{
namespace data{

void MaterialContext_obj::__construct( ::iron::data::TMaterialContext raw, ::Dynamic done){
            	HX_STACKFRAME(&_hx_pos_c2b72e234e45c502_78_new)
HXLINE(  81)		this->id = 0;
HXLINE(  80)		this->textures = null();
HXLINE(  84)		 ::iron::data::MaterialContext _gthis = hx::ObjectPtr<OBJ_>(this);
HXLINE(  85)		this->raw = raw;
HXLINE(  86)		this->id = ::iron::data::MaterialContext_obj::num++;
HXLINE(  88)		bool _hx_tmp;
HXDLIN(  88)		if (hx::IsNotNull( raw->bind_textures )) {
HXLINE(  88)			_hx_tmp = (raw->bind_textures->length > 0);
            		}
            		else {
HXLINE(  88)			_hx_tmp = false;
            		}
HXDLIN(  88)		if (_hx_tmp) {
HXLINE(  90)			::Array< ::Dynamic> this1 = ::Array_obj< ::Dynamic>::__new(raw->bind_textures->length);
HXDLIN(  90)			this->textures = this1;
HXLINE(  91)			::Array< int > texturesLoaded = ::Array_obj< int >::fromData( _hx_array_data_415af68a_4,1);
HXLINE(  93)			{
HXLINE(  93)				int _g1 = 0;
HXDLIN(  93)				int _g = raw->bind_textures->length;
HXDLIN(  93)				while((_g1 < _g)){
            					HX_BEGIN_LOCAL_FUNC_S6(hx::LocalFunc,_hx_Closure_1, ::iron::data::MaterialContext,_gthis, ::iron::data::TBindTexture,tex, ::iron::data::TMaterialContext,raw,::Array< int >,texturesLoaded, ::Dynamic,done,int,i) HXARGC(1)
            					void _hx_run( ::kha::Image image){
            						HX_STACKFRAME(&_hx_pos_c2b72e234e45c502_103_new)
HXLINE( 104)						_gthis->textures->__unsafe_set(i,image);
HXLINE( 105)						texturesLoaded[0]++;
HXLINE( 108)						if (hx::IsNotNull( tex->mipmaps )) {
HXLINE( 109)							::Array< ::Dynamic> mipmaps = ::Array_obj< ::Dynamic>::__new(0);
HXLINE( 110)							while((mipmaps->length < tex->mipmaps->length)){
HXLINE( 110)								mipmaps->push(null());
            							}
HXLINE( 111)							::Array< int > mipmapsLoaded = ::Array_obj< int >::fromData( _hx_array_data_415af68a_6,1);
HXLINE( 113)							{
HXLINE( 113)								int _g3 = 0;
HXDLIN( 113)								int _g2 = tex->mipmaps->length;
HXDLIN( 113)								while((_g3 < _g2)){
            									HX_BEGIN_LOCAL_FUNC_S9(hx::LocalFunc,_hx_Closure_0, ::iron::data::MaterialContext,_gthis, ::iron::data::TBindTexture,tex,::Array< int >,mipmapsLoaded, ::iron::data::TMaterialContext,raw,int,j,::Array< int >,texturesLoaded,::Array< ::Dynamic>,mipmaps, ::Dynamic,done, ::kha::Image,image) HXARGC(1)
            									void _hx_run( ::kha::Image mipimg){
            										HX_STACKFRAME(&_hx_pos_c2b72e234e45c502_116_new)
HXLINE( 117)										mipmaps[j] = mipimg;
HXLINE( 118)										mipmapsLoaded[0]++;
HXLINE( 120)										if ((mipmapsLoaded->__get(0) == tex->mipmaps->length)) {
HXLINE( 121)											image->setMipmaps(mipmaps);
HXLINE( 122)											tex->mipmaps = null();
HXLINE( 123)											tex->generate_mipmaps = false;
HXLINE( 125)											if ((texturesLoaded->__get(0) == raw->bind_textures->length)) {
HXLINE( 125)												done(_gthis);
            											}
            										}
            									}
            									HX_END_LOCAL_FUNC1((void))

HXLINE( 113)									_g3 = (_g3 + 1);
HXDLIN( 113)									int j = (_g3 - 1);
HXLINE( 114)									::String name = tex->mipmaps->__get(j);
HXLINE( 116)									::iron::data::Data_obj::getImage(name, ::Dynamic(new _hx_Closure_0(_gthis,tex,mipmapsLoaded,raw,j,texturesLoaded,mipmaps,done,image)),null(),null());
            								}
            							}
            						}
            						else {
HXLINE( 130)							bool _hx_tmp2;
HXDLIN( 130)							if (hx::IsEq( tex->generate_mipmaps,true )) {
HXLINE( 130)								_hx_tmp2 = hx::IsNotNull( image );
            							}
            							else {
HXLINE( 130)								_hx_tmp2 = false;
            							}
HXDLIN( 130)							if (_hx_tmp2) {
HXLINE( 131)								image->generateMipmaps(1000);
HXLINE( 132)								tex->mipmaps = null();
HXLINE( 133)								tex->generate_mipmaps = false;
HXLINE( 135)								if ((texturesLoaded->__get(0) == raw->bind_textures->length)) {
HXLINE( 135)									done(_gthis);
            								}
            							}
            							else {
HXLINE( 137)								if ((texturesLoaded->__get(0) == raw->bind_textures->length)) {
HXLINE( 137)									done(_gthis);
            								}
            							}
            						}
            					}
            					HX_END_LOCAL_FUNC1((void))

HXLINE(  93)					_g1 = (_g1 + 1);
HXDLIN(  93)					int i = (_g1 - 1);
HXLINE(  94)					 ::iron::data::TBindTexture tex = raw->bind_textures->__get(i).StaticCast<  ::iron::data::TBindTexture >();
HXLINE(  97)					if ((tex->file == HX_("",00,00,00,00))) {
HXLINE(  98)						texturesLoaded[0]++;
HXLINE(  99)						if ((texturesLoaded->__get(0) == raw->bind_textures->length)) {
HXLINE(  99)							done(hx::ObjectPtr<OBJ_>(this));
            						}
HXLINE( 100)						continue;
            					}
HXLINE( 139)					::String _hx_tmp1;
HXDLIN( 139)					if (hx::IsNotNull( tex->format )) {
HXLINE( 139)						_hx_tmp1 = tex->format;
            					}
            					else {
HXLINE( 139)						_hx_tmp1 = HX_("RGBA32",53,5a,88,d6);
            					}
HXLINE( 103)					::iron::data::Data_obj::getImage(tex->file, ::Dynamic(new _hx_Closure_1(_gthis,tex,raw,texturesLoaded,done,i)),false,_hx_tmp1);
            				}
            			}
            		}
            		else {
HXLINE( 142)			done(hx::ObjectPtr<OBJ_>(this));
            		}
            	}

Dynamic MaterialContext_obj::__CreateEmpty() { return new MaterialContext_obj; }

void *MaterialContext_obj::_hx_vtable = 0;

Dynamic MaterialContext_obj::__Create(hx::DynamicArray inArgs)
{
	hx::ObjectPtr< MaterialContext_obj > _hx_result = new MaterialContext_obj();
	_hx_result->__construct(inArgs[0],inArgs[1]);
	return _hx_result;
}

bool MaterialContext_obj::_hx_isInstanceOf(int inClassId) {
	return inClassId==(int)0x00000001 || inClassId==(int)0x0b415ad2;
}

void MaterialContext_obj::setTextureParameters(::Dynamic g,int textureIndex, ::iron::data::ShaderContext context,int unitIndex){
            	HX_STACKFRAME(&_hx_pos_c2b72e234e45c502_148_setTextureParameters)
HXDLIN( 148)		context->setTextureParameters(g,unitIndex,this->raw->bind_textures->__get(textureIndex).StaticCast<  ::iron::data::TBindTexture >());
            	}


HX_DEFINE_DYNAMIC_FUNC4(MaterialContext_obj,setTextureParameters,(void))

int MaterialContext_obj::num;


hx::ObjectPtr< MaterialContext_obj > MaterialContext_obj::__new( ::iron::data::TMaterialContext raw, ::Dynamic done) {
	hx::ObjectPtr< MaterialContext_obj > __this = new MaterialContext_obj();
	__this->__construct(raw,done);
	return __this;
}

hx::ObjectPtr< MaterialContext_obj > MaterialContext_obj::__alloc(hx::Ctx *_hx_ctx, ::iron::data::TMaterialContext raw, ::Dynamic done) {
	MaterialContext_obj *__this = (MaterialContext_obj*)(hx::Ctx::alloc(_hx_ctx, sizeof(MaterialContext_obj), true, "iron.data.MaterialContext"));
	*(void **)__this = MaterialContext_obj::_hx_vtable;
	__this->__construct(raw,done);
	return __this;
}

MaterialContext_obj::MaterialContext_obj()
{
}

void MaterialContext_obj::__Mark(HX_MARK_PARAMS)
{
	HX_MARK_BEGIN_CLASS(MaterialContext);
	HX_MARK_MEMBER_NAME(raw,"raw");
	HX_MARK_MEMBER_NAME(textures,"textures");
	HX_MARK_MEMBER_NAME(id,"id");
	HX_MARK_END_CLASS();
}

void MaterialContext_obj::__Visit(HX_VISIT_PARAMS)
{
	HX_VISIT_MEMBER_NAME(raw,"raw");
	HX_VISIT_MEMBER_NAME(textures,"textures");
	HX_VISIT_MEMBER_NAME(id,"id");
}

hx::Val MaterialContext_obj::__Field(const ::String &inName,hx::PropertyAccess inCallProp)
{
	switch(inName.length) {
	case 2:
		if (HX_FIELD_EQ(inName,"id") ) { return hx::Val( id ); }
		break;
	case 3:
		if (HX_FIELD_EQ(inName,"raw") ) { return hx::Val( raw ); }
		break;
	case 8:
		if (HX_FIELD_EQ(inName,"textures") ) { return hx::Val( textures ); }
		break;
	case 20:
		if (HX_FIELD_EQ(inName,"setTextureParameters") ) { return hx::Val( setTextureParameters_dyn() ); }
	}
	return super::__Field(inName,inCallProp);
}

bool MaterialContext_obj::__GetStatic(const ::String &inName, Dynamic &outValue, hx::PropertyAccess inCallProp)
{
	switch(inName.length) {
	case 3:
		if (HX_FIELD_EQ(inName,"num") ) { outValue = ( num ); return true; }
	}
	return false;
}

hx::Val MaterialContext_obj::__SetField(const ::String &inName,const hx::Val &inValue,hx::PropertyAccess inCallProp)
{
	switch(inName.length) {
	case 2:
		if (HX_FIELD_EQ(inName,"id") ) { id=inValue.Cast< int >(); return inValue; }
		break;
	case 3:
		if (HX_FIELD_EQ(inName,"raw") ) { raw=inValue.Cast<  ::iron::data::TMaterialContext >(); return inValue; }
		break;
	case 8:
		if (HX_FIELD_EQ(inName,"textures") ) { textures=inValue.Cast< ::Array< ::Dynamic> >(); return inValue; }
	}
	return super::__SetField(inName,inValue,inCallProp);
}

bool MaterialContext_obj::__SetStatic(const ::String &inName,Dynamic &ioValue,hx::PropertyAccess inCallProp)
{
	switch(inName.length) {
	case 3:
		if (HX_FIELD_EQ(inName,"num") ) { num=ioValue.Cast< int >(); return true; }
	}
	return false;
}

void MaterialContext_obj::__GetFields(Array< ::String> &outFields)
{
	outFields->push(HX_("raw",e8,d5,56,00));
	outFields->push(HX_("textures",38,f7,ce,65));
	outFields->push(HX_("id",db,5b,00,00));
	super::__GetFields(outFields);
};

#ifdef HXCPP_SCRIPTABLE
static hx::StorageInfo MaterialContext_obj_sMemberStorageInfo[] = {
	{hx::fsObject /*::iron::data::TMaterialContext*/ ,(int)offsetof(MaterialContext_obj,raw),HX_("raw",e8,d5,56,00)},
	{hx::fsObject /*Array< ::Dynamic >*/ ,(int)offsetof(MaterialContext_obj,textures),HX_("textures",38,f7,ce,65)},
	{hx::fsInt,(int)offsetof(MaterialContext_obj,id),HX_("id",db,5b,00,00)},
	{ hx::fsUnknown, 0, null()}
};
static hx::StaticInfo MaterialContext_obj_sStaticStorageInfo[] = {
	{hx::fsInt,(void *) &MaterialContext_obj::num,HX_("num",46,de,53,00)},
	{ hx::fsUnknown, 0, null()}
};
#endif

static ::String MaterialContext_obj_sMemberFields[] = {
	HX_("raw",e8,d5,56,00),
	HX_("textures",38,f7,ce,65),
	HX_("id",db,5b,00,00),
	HX_("setTextureParameters",63,39,4d,35),
	::String(null()) };

static void MaterialContext_obj_sMarkStatics(HX_MARK_PARAMS) {
	HX_MARK_MEMBER_NAME(MaterialContext_obj::num,"num");
};

#ifdef HXCPP_VISIT_ALLOCS
static void MaterialContext_obj_sVisitStatics(HX_VISIT_PARAMS) {
	HX_VISIT_MEMBER_NAME(MaterialContext_obj::num,"num");
};

#endif

hx::Class MaterialContext_obj::__mClass;

static ::String MaterialContext_obj_sStaticFields[] = {
	HX_("num",46,de,53,00),
	::String(null())
};

void MaterialContext_obj::__register()
{
	MaterialContext_obj _hx_dummy;
	MaterialContext_obj::_hx_vtable = *(void **)&_hx_dummy;
	hx::Static(__mClass) = new hx::Class_obj();
	__mClass->mName = HX_("iron.data.MaterialContext",8a,f6,5a,41);
	__mClass->mSuper = &super::__SGetClass();
	__mClass->mConstructEmpty = &__CreateEmpty;
	__mClass->mConstructArgs = &__Create;
	__mClass->mGetStaticField = &MaterialContext_obj::__GetStatic;
	__mClass->mSetStaticField = &MaterialContext_obj::__SetStatic;
	__mClass->mMarkFunc = MaterialContext_obj_sMarkStatics;
	__mClass->mStatics = hx::Class_obj::dupFunctions(MaterialContext_obj_sStaticFields);
	__mClass->mMembers = hx::Class_obj::dupFunctions(MaterialContext_obj_sMemberFields);
	__mClass->mCanCast = hx::TCanCast< MaterialContext_obj >;
#ifdef HXCPP_VISIT_ALLOCS
	__mClass->mVisitFunc = MaterialContext_obj_sVisitStatics;
#endif
#ifdef HXCPP_SCRIPTABLE
	__mClass->mMemberStorageInfo = MaterialContext_obj_sMemberStorageInfo;
#endif
#ifdef HXCPP_SCRIPTABLE
	__mClass->mStaticStorageInfo = MaterialContext_obj_sStaticStorageInfo;
#endif
	hx::_hx_RegisterClass(__mClass->mName, __mClass);
}

void MaterialContext_obj::__boot()
{
{
            	HX_STACKFRAME(&_hx_pos_c2b72e234e45c502_82_boot)
HXDLIN(  82)		num = 0;
            	}
}

} // end namespace iron
} // end namespace data
